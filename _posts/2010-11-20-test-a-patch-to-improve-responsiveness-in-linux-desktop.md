---
layout: post
title: "리눅스 데스크탑 반응속도 향상 패치 테스트"
tags: [ Kernel,  Linux,  Schedule ]
---

며칠전부터 리눅스 커뮤니티와 관련 뉴스 사이트에서 리눅스 데스크탑 반응속도(reponsiveness)를 획기적으로 향상시킨다는 [233라인짜리 패치](http://marc.info/?l=linux-kernel&m=128978361700898&w=2)에 대한 [소식](http://www.phoronix.com/scan.php?page=article&item=linux_2637_video&num=1)이 끊임없이 흘러다니고 있습니다. 리누스 토발즈가 극찬을 해서 더 유명해진 것 같기도 한데, 아마도 원래 아이디어를 본인이 제안해서 그런게 아닌가 싶기도 하고, 커널 컴파일과 동시에 웹브라우징, 동영상 재생을 하는 것처럼 극단적인 환경과 멀티코어 시스템에만 적용될 뿐이라고 [그리 대단하게 않게 보는 사람](http://psankar.blogspot.com/2010/11/cpu-or-io-what-matters-most.html)들도 있는 것 같습니다. 게다가 한 터미널(tty)에서 파생한 프로세스를 모두 하나의 태스크 그룹으로 묶어 다른 태스크 그룹과 공평한 스케줄링이 되도록 한다는 아이디어가 근본적으로 cgroup 파일시스템을 이용하기 때문에 특별한 커널 패치 없이 [cgroup 데몬과 스크립트를 이용해 동일한 효과를 얻는 기법](http://blog.glock.co.za/cgroup-user-space-speed-patch)도 등장했습니다.

직접 느껴보려고 일단 회사 개발 장비에 적용해 보았는데, 사양이 너무 좋아서인지 별로 차이점을 느끼지 못했습니다. 그래서 오래된 노트북 PC와 상대적으로 낮은 사양의 데스크탑 장비에도 적용해봤습니다. 하지만, 아이디어 자체가 터미널 작업과 다른 작업을 다른 그룹으로 나누는 것 뿐이라서 그런지, 터미널을 열어 다른 작업을 안했더니 별로 반응속도가 달라지는 건 느끼지 못하고 있습니다.

그럼에도 불구하고, 스케줄링 정책만으로 데스크탑 반응성을 향상할 수 있다는 아이디어를 조금만 더 확장하면 더 좋은 아이디어만 알고리즘이 나오지 않을까 기대해 봅니다. 아니나 다를까, [페도라 15에서 시작 데몬으로 탑재할 SystemD 데몬에서 이미 사용자 세션, 서비스별로 각각의 태스크 그룹을 분리하도록 적용](http://www.phoronix.com/scan.php?page=news_item&px=ODc5OQ)하는 것 같습니다.

**[업데이트-2010.11.22]** 예를 들어 제 경우, 구형 노트북에서 조금이라도 그래픽 성능 향상을 얻을 수 있을까 해서 ﻿`/etc/gdm/Init/Default` 파일 마지막 라인 '`exit 0`' 전에 다음과 같은 항목을 추가해서 체감 속도 변화를 느껴보려고 노력 중입니다.

    #chrt -rr -p 10 $(pidof X)
    mkdir -m 0700 -p /mnt/cgroups/cpu/Xorg
    echo $(pidof X) > /mnt/cgroups/cpu/Xorg/tasks
