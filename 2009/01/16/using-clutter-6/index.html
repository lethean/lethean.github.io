<!DOCTYPE html>
<html lang="ko-kr">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.7.0">

  

  
  
  
  
  
  

  

  
  
  
    
  
  <meta name="description" content="지금까지 예제가 단편적이라면 이번에는 조금 제대로 된 기능하는 코드입니다. 이 예제는 이미지 파일을 읽어들여 타원 주위로 회전시키며 보여줍니다. 사용자가 이미지">

  
  <link rel="alternate" hreflang="ko-kr" href="/2009/01/16/using-clutter-6/">

  


  
  
  
  <meta name="theme-color" content="#3f51b5">
  

  
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css" integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      
        
      

      
    
      

      
      

      
    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap">
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  





<script async src="https://www.googletagmanager.com/gtag/js?id=UA-3202603-9"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
      dataLayer.push(arguments);
  }

  function trackOutboundLink(url, target) {
    gtag('event', 'click', {
         'event_category': 'outbound',
         'event_label': url,
         'transport_type': 'beacon',
         'event_callback': function () {
           if (target !== '_blank') {
             document.location = url;
           }
         }
    });
    console.debug("Outbound link clicked: " + url);
  }

  function onClickCallback(event) {
    if ((event.target.tagName !== 'A') || (event.target.host === window.location.host)) {
      return;
    }
    trackOutboundLink(event.target, event.target.getAttribute('target'));  
  }

  gtag('js', new Date());
  gtag('config', 'UA-3202603-9', {});

  
  document.addEventListener('click', onClickCallback, false);
</script>


  


  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hu95c16a3019ad21b24832aeafe533c33c_47314_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hu95c16a3019ad21b24832aeafe533c33c_47314_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="/2009/01/16/using-clutter-6/">

  
  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary">
  
  <meta property="og:site_name" content="대체로 무해함">
  <meta property="og:url" content="/2009/01/16/using-clutter-6/">
  <meta property="og:title" content="클러터(Clutter) 사용하기 (6) | 대체로 무해함">
  <meta property="og:description" content="지금까지 예제가 단편적이라면 이번에는 조금 제대로 된 기능하는 코드입니다. 이 예제는 이미지 파일을 읽어들여 타원 주위로 회전시키며 보여줍니다. 사용자가 이미지"><meta property="og:image" content="img/map[gravatar:%!s(bool=false) shape:circle]">
  <meta property="twitter:image" content="img/map[gravatar:%!s(bool=false) shape:circle]"><meta property="og:locale" content="ko-kr">
  
    
      <meta property="article:published_time" content="2009-01-16T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2009-01-16T00:00:00&#43;00:00">
  

  


    






  






<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/2009/01/16/using-clutter-6/"
  },
  "headline": "클러터(Clutter) 사용하기 (6)",
  
  "datePublished": "2009-01-16T00:00:00Z",
  "dateModified": "2009-01-16T00:00:00Z",
  
  "author": {
    "@type": "Person",
    "name": "대체로 무해함"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "대체로 무해함",
    "logo": {
      "@type": "ImageObject",
      "url": "img//"
    }
  },
  "description": "지금까지 예제가 단편적이라면 이번에는 조금 제대로 된 기능하는 코드입니다. 이 예제는 이미지 파일을 읽어들여 타원 주위로 회전시키며 보여줍니다. 사용자가 이미지"
}
</script>

  

  


  


  





  <title>클러터(Clutter) 사용하기 (6) | 대체로 무해함</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  







<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">대체로 무해함</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="네비게이션">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">대체로 무해함</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/lethean/"><span>About</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      <li class="nav-item">
        <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
      </li>
      

      

    </ul>

  </div>
</nav>


  <article class="article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1>클러터(Clutter) 사용하기 (6)</h1>

  

  
    


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    2009-01-16
  </span>
  

  

  

  
  
  
  <span class="middot-divider"></span>
  <a href="/2009/01/16/using-clutter-6/#disqus_thread"></a>
  

  
  

</div>

    














  
</div>



  <div class="article-container">

    <div class="article-style">
      <p>지금까지 예제가 단편적이라면 이번에는 조금 제대로 된 기능하는 코드입니다. 이 예제는 이미지 파일을 읽어들여 타원 주위로 회전시키며 보여줍니다. 사용자가 이미지를 클릭하면 맨 앞으로 오면서 확대되면서 파일 이름도 보여줍니다. 먼저 스크린샷부터.</p>
<p><img src="/figures/clutter-image-viewer.png" alt=""></p>
<p>여러 타임라인과 움직임 객체를 이용해서 조금 복잡해 보이지만, 아마도 실제 어플리케이션은 이보다 훨씬 더 유연하고 기능적으로 동작해야겠지요. 주석을 우리말로 번역하고, 원본보다 조금 더 속도감있게 변경한 소스는 다음과 같습니다. (조금 길지요&hellip;)</p>
<pre><code>#include &lt;clutter/clutter.h&gt;
#include &lt;stdlib.h&gt;

static ClutterActor *stage = NULL;

/* 파일 이름을 보여주기 위한 레이블 액터 */
static ClutterActor *label_filename = NULL;

/* 모든 이미지를 타원 주위로 회전화기 위한 타임라인 */
static ClutterTimeline *timeline_rotation = NULL;

/* 이미지 하나를 위로 올리고 확대하기 위한 타임라인과 움직임 객체 */
static ClutterTimeline *timeline_moveup = NULL;
static ClutterBehaviour *behaviour_scale = NULL;
static ClutterBehaviour *behaviour_path = NULL;
static ClutterBehaviour *behaviour_opacity = NULL;

/* 이미지 목록을 보여줄 타원의 좌표와 크기 */
static const gint ELLIPSE_Y = 390;
static const gint ELLIPSE_HEIGHT = 450; /* 90도 회전된 상태에서 앞뒤 거리 */
static const gint IMAGE_HEIGHT = 100;

static double angle_step = 30;

typedef struct _Item
{
  ClutterActor *actor;
  ClutterBehaviour *ellipse_behaviour;
  gchar* filepath;
} Item;

/* 맨 앞으로 오게 할 이미지 항목 */
static Item *item_at_front = NULL;

static GSList *list_items = NULL;

static void rotate_all_until_item_is_at_front (Item *item);

static gdouble
angle_in_360 (gdouble angle)
{
  gdouble result = angle;

  while (result &gt;= 360)
    result -= 360;

  return result;
}

static void
on_foreach_clear_list_items (gpointer data, gpointer user_data)
{
  Item* item = (Item*)data;

  /* 액터는 스테이지가 없어질때 자동으로 정리되므로 해제할 필요가 없습니다. */
  g_object_unref (item-&gt;ellipse_behaviour);
  g_free (item-&gt;filepath);
  g_free (item);
}

static void
scale_texture_default (ClutterActor *texture)
{
  int pixbuf_height = 0;

  /* 이미지의 세로 크기를 얻습니다. */
  clutter_texture_get_base_size (CLUTTER_TEXTURE (texture),
                 NULL, &amp;pixbuf_height);

  const gdouble scale = pixbuf_height ?
    IMAGE_HEIGHT /  (gdouble)pixbuf_height : 0;

  /* 기준 높이에 맞게 스케일링합니다. */
  clutter_actor_set_scale (texture, scale, scale);
}

static void
load_images (const gchar* directory_path)
{
  g_return_if_fail (directory_path);

  /* 현재 이미지 목록을 비웁니다. */
  g_slist_foreach (list_items, on_foreach_clear_list_items, NULL);
  g_slist_free (list_items);

  /* 새로운 목록을 초기화합니다. */
  list_items = NULL;

  /* 디렉토리에 있는 이미지 목록을 얻습니다. */
  GError *error = NULL;
  GDir* dir = g_dir_open (directory_path, 0, &amp;error);
  if (error)
    {
      g_warning (&quot;g_dir_open() failed: %sn&quot;, error-&gt;message);
      g_clear_error (&amp;error);
      return;
    }

  const gchar* filename = NULL;
  while ((filename = g_dir_read_name(dir)))
    {
      gchar* path = g_build_filename (directory_path, filename, NULL);

      /* 이미지 파일로부터 텍스쳐 액터를 만듭니다. */
      ClutterActor *actor = clutter_texture_new_from_file (path, NULL);
      if (actor)
    {
      Item* item = g_new0 (Item, 1);

      item-&gt;actor = actor;
      item-&gt;filepath = g_strdup (path);

      /* 모든 이미지가 같은 높이가 되도록 스케일링합니다. */
      scale_texture_default (item-&gt;actor);

      list_items = g_slist_append (list_items, item);
    }

      g_free (path);
    }

  g_dir_close (dir);
}

static gboolean
on_texture_button_press (ClutterActor *actor,
             ClutterEvent *event,
             gpointer      user_data)
{
  /* 이미지 회전 타임라인이 실행중이면 이벤트를 무시합니다.
   * 즉, 이미지가 움직이고 있는 도중에 발생하는 마우스 버튼 클릭을 무시합니다.
   */
  if (timeline_rotation &amp;&amp; clutter_timeline_is_playing (timeline_rotation))
    {
      printf (&quot;on_texture_button_press(): ignoringn&quot;);
      return FALSE;
    }

  Item *item = (Item *) user_data;

  /* 선택한 아이템이 맨 앞에 올때까지 이미지 목록을 회전시킵니다. */
  rotate_all_until_item_is_at_front (item);

  return TRUE;
}

static void
add_to_ellipse_behaviour (ClutterTimeline *timeline_rotation,
              gdouble          start_angle,
              Item            *item)
{
  g_return_if_fail (timeline_rotation);

  ClutterAlpha *alpha =
    clutter_alpha_new_full (timeline_rotation,
                CLUTTER_ALPHA_SINE_INC,
                NULL,
                NULL);

  /* 타원을 따라 동작할 움직임 객체를 만듭니다. */
  item-&gt;ellipse_behaviour =
    clutter_behaviour_ellipse_new (alpha,
                   320, ELLIPSE_Y,
                   ELLIPSE_HEIGHT, ELLIPSE_HEIGHT,
                   CLUTTER_ROTATE_CW,
                   angle_in_360 (start_angle),
                   angle_in_360 (start_angle + 360));

  /* X축 기준으로 타원의 축 기울입니다. */
  clutter_behaviour_ellipse_set_angle_tilt (
    CLUTTER_BEHAVIOUR_ELLIPSE (item-&gt;ellipse_behaviour),
    CLUTTER_X_AXIS,
    -90);

  /* ClutterAlpha 객체는 따로 해제할 필요가 없습니다. */

  /* 액터에 움직임을 적용합니다. */
  clutter_behaviour_apply (item-&gt;ellipse_behaviour, item-&gt;actor);
}

static void
add_image_actors (void)
{
  int x = 20;
  int y = 0;
  gdouble angle = 0;
  GSList *list = list_items;

  /* 이미지 갯수로 회전시 이미지 간격을 계산합니다. */
  if (list)
    angle_step = 360 / g_slist_length (list);

  while (list)
    {
      /* 이미지 액터를 스테이지에 넣습니다. */
      Item *item = (Item *) list-&gt;data;
      ClutterActor *actor = item-&gt;actor;
      clutter_container_add_actor (CLUTTER_CONTAINER (stage), actor);

      /* 초기 좌표를 지정합니다. */
      clutter_actor_set_position (actor, x, y);
      y += 100;

      /* 기본적으로 스테이지만 이벤트를 발생할 수 있으므로,
       * 액터도 이벤트를 발생할 수 있게 합니다.
       */
      clutter_actor_set_reactive (actor, TRUE);

      /* 버튼 클릭 시그널에 핸들러 함수를 연결합니다. */
      g_signal_connect (actor, &quot;button-press-event&quot;,
            G_CALLBACK (on_texture_button_press), item);

      /* 타원 액터에 움직임을 추가합니다. */
      add_to_ellipse_behaviour (timeline_rotation, angle, item);
      angle += angle_step;

      clutter_actor_show (actor);

      list = g_slist_next (list);
    }
}

/* 이 기그널 핸들러는 선택한 이미지가 확대되어 위로 이동하는 타임라인이
 * 완료되었을때 호출됩니다.
 */
static void
on_timeline_moveup_completed (ClutterTimeline* timeline,
                              gpointer         user_data)
{
  /* 타임라인 객체를 해제합니다. */
  g_object_unref (timeline_moveup);
  timeline_moveup = NULL;

  g_object_unref (behaviour_scale);
  behaviour_scale = NULL;

  g_object_unref (behaviour_path);
  behaviour_path = NULL;

  g_object_unref (behaviour_opacity);
  behaviour_opacity = NULL;
}

/* 이 시그널 핸들러는 이미지가 타원을 따라 회전하는 타임라인이 완료되었을때
 * 호출됩니다.
 */
static void
on_timeline_rotation_completed (ClutterTimeline* timeline,
                                gpointer         user_data)
{
  /* 모든 이미지가 회전하다가 클릭한 이미지가 맨 앞에 온 상태입니다.
   * 이제 맨 앞의 이미지를 크게 보여주고 파일 이름도 표시합니다.
   */

  /* 이미지를 변형합니다. */
  ClutterActor *actor = item_at_front-&gt;actor;
  timeline_moveup = clutter_timeline_new(15 /* frames */,
                     30 /* frames per second */);
  ClutterAlpha *alpha = clutter_alpha_new_full (timeline_moveup,
                        CLUTTER_ALPHA_SINE_INC,
                        NULL, NULL);

  /* 현재 크기에서 약 2배 크기로 확대합니다. */
  gdouble scale_start = 0;
  clutter_actor_get_scale (actor, &amp;scale_start, NULL);
  const gdouble scale_end = scale_start * 1.8;

  behaviour_scale =
    clutter_behaviour_scale_new (alpha,
                 scale_start, scale_start,
                 scale_end, scale_end);
  clutter_behaviour_apply (behaviour_scale, actor);

  /* 그림을 위 방향을 이동합니다. */
  ClutterKnot knots[2];
  knots[0].x = clutter_actor_get_x (actor);
  knots[0].y = clutter_actor_get_y (actor);
  knots[1].x = knots[0].x;
  knots[1].y = knots[0].y - 250;
  behaviour_path =
    clutter_behaviour_path_new (alpha, knots, G_N_ELEMENTS(knots));
  clutter_behaviour_apply (behaviour_path, actor);

  /* 파일 이름을 조금씩 보여줍니다. */
  clutter_label_set_text (CLUTTER_LABEL (label_filename),
              item_at_front-&gt;filepath);
  behaviour_opacity = clutter_behaviour_opacity_new (alpha, 0, 255);
  clutter_behaviour_apply (behaviour_opacity, label_filename);

  /* 모든 움직임(behaviours)을 시작합니다.
   * 또한 완료되었을때 핸들러를 연결합니다.
   */
  g_signal_connect (timeline_moveup, &quot;completed&quot;,
                    G_CALLBACK (on_timeline_moveup_completed), NULL);
  clutter_timeline_start (timeline_moveup);
}

static void
rotate_all_until_item_is_at_front (Item *item)
{
  g_return_if_fail (item);

  clutter_timeline_stop(timeline_rotation);

  /* 선택한 이미지를 위로 올려 보여주는 타임라인이 동작중이라면
   * 당장 멈추게 합니다.
   */
  if (timeline_moveup)
    clutter_timeline_stop (timeline_moveup);

  clutter_actor_set_opacity (label_filename, 0);

  /* 선택한 이미지 항목의 번호를 얻습니다. */
  const gint pos = g_slist_index (list_items, item);

  g_assert (pos != -1);

  if (!item_at_front &amp;&amp; list_items)
    item_at_front = (Item *) list_items-&gt;data;

  /* 현재 맨 앞에 있는 항목의 번호를 얻습니다. */
  gint pos_front = 0;
  if (item_at_front)
    pos_front = g_slist_index (list_items, item_at_front);

  g_assert (pos_front != -1);

  /* 첫번째 항목의 시작 / 끝 각도를 계산합니다. */
  const gdouble angle_front = 180;
  gdouble angle_start = angle_front - (angle_step * pos_front);
  angle_start = angle_in_360 (angle_start);
  gdouble angle_end = angle_front - (angle_step * pos);

  gdouble angle_diff = 0;

  /* 모든 이미지 항목의 끝 각도를 설정합니다. */
  GSList *list = list_items;
  while (list)
    {
      Item *this_item = (Item*)list-&gt;data;

      /* 이미지 크기를 원래대로 되돌립니다. */
      scale_texture_default (this_item-&gt;actor);

      angle_start = angle_in_360 (angle_start);
      angle_end = angle_in_360 (angle_end);

      /* 현재 맨 앞 있는 항목일 경우 360도 더 회전하게 함니다. */
      if (item_at_front == item)
    angle_end += 360;
      angle_end = angle_in_360 (angle_end);

      clutter_behaviour_ellipse_set_angle_start (
        CLUTTER_BEHAVIOUR_ELLIPSE (this_item-&gt;ellipse_behaviour),
    angle_start);

      clutter_behaviour_ellipse_set_angle_end (
        CLUTTER_BEHAVIOUR_ELLIPSE (this_item-&gt;ellipse_behaviour), angle_end);

      /* 선택한 항목일 경우 */
      if (this_item == item)
    {
      if (angle_start &lt; angle_end)
        angle_diff =  angle_end - angle_start;
      else
        angle_diff = 360 - (angle_start - angle_end);
    }

      /* TODO: Set the number of frames, depending on the angle.
       * otherwise the actor will take the same amount of time to reach
       * the end angle regardless of how far it must move, causing it to
       * move very slowly if it does not have far to move.
       */
      angle_end += angle_step;
      angle_start += angle_step;
      list = g_slist_next (list);
    }

  /* 속도는 같지만 이동해야 할 거리만큼 프레임 수를 조절합니다. */
  gint pos_to_move = 0;
  if (pos_front &lt; pos)
    {
      const gint count = g_slist_length (list_items);
      pos_to_move = count + (pos - pos_front);
    }
  else
    {
      pos_to_move = pos_front - pos;
    }

  clutter_timeline_set_n_frames (timeline_rotation, angle_diff / 5);

  /* 타임라인이 끝난뒤 맨 앞에 위치해야할 항목을 기억합니다. */
  item_at_front = item;

  clutter_timeline_start (timeline_rotation);
}

int
main (int argc, char *argv[])
{
  ClutterColor stage_color = { 0xB0, 0xB0, 0xB0, 0xff }; /* light gray */

  clutter_init (&amp;argc, &amp;argv);

  /* 스테이지를 얻어 크기와 색상을 정합니다. */
  stage = clutter_stage_get_default ();
  clutter_actor_set_size (stage, 800, 600);
  clutter_stage_set_color (CLUTTER_STAGE (stage), &amp;stage_color);

  /* 파일 이름을 보여주기 위한 레이블 액터를 만들고, 일단 안보이게 합니다. */
  label_filename = clutter_label_new ();
  ClutterColor label_color = { 0x60, 0x60, 0x90, 0xff }; /* blueish */
  clutter_label_set_color (CLUTTER_LABEL (label_filename), &amp;label_color);
  clutter_label_set_font_name (CLUTTER_LABEL (label_filename), &quot;Sans 24&quot;);
  clutter_actor_set_position (label_filename, 10, 10);
  clutter_actor_set_opacity (label_filename, 0); /* hidden */
  clutter_container_add_actor (CLUTTER_CONTAINER (stage), label_filename);
  clutter_actor_show (label_filename);

  /* 이미지 목록 밑에 보여줄 사각형을 만듭니다. */
  ClutterColor rect_color = { 0xff, 0xff, 0xff, 0xff }; /* white */
  ClutterActor *rect = clutter_rectangle_new_with_color (&amp;rect_color);
  clutter_actor_set_height (rect, ELLIPSE_HEIGHT + 20);
  clutter_actor_set_width (rect, clutter_actor_get_width (stage) + 100);

  /* 사각형을 이미지 목록 밑에 위치하도록 합니다. */
  clutter_actor_set_position (rect,
    -(clutter_actor_get_width (rect) - clutter_actor_get_width (stage)) / 2,
    ELLIPSE_Y + IMAGE_HEIGHT - (clutter_actor_get_height (rect) / 2));

  /* X축을 기준으로 사각형을 눕힙니다. */
  clutter_actor_set_rotation (rect, CLUTTER_X_AXIS, -90,
                  0, (clutter_actor_get_height (rect) / 2), 0);
  clutter_container_add_actor (CLUTTER_CONTAINER (stage), rect);
  clutter_actor_show (rect);

  /* 스테이지를 보이게 합니다. */
  clutter_actor_show (stage);

  /** 이미지를 회전시킬 타임라인을 만들고,
   * 회전이 끝났을때 실행할 핸들러를 연결합니다.
   */
  timeline_rotation = clutter_timeline_new(60 /* frames */,
                       30 /* frames per second */);
  g_signal_connect (timeline_rotation, &quot;completed&quot;,
            G_CALLBACK (on_timeline_rotation_completed), NULL);

  /* 이미지를 로드하고 각각에 대한 액터를 만듭니다. */
  load_images (&quot;./images/&quot;);
  add_image_actors ();

  /* clutter_timeline_set_loop(timeline_rotation, TRUE); */

  /* 첫번째 이미지가 선택된 것처럼 회전을 시작합니다. */
  if (list_items)
    rotate_all_until_item_is_at_front ((Item*)list_items-&gt;data);

  /* 메인 이벤트 루프를 시작합니다. */
  clutter_main ();

  /* 모든 이미지 목록을 해제합니다. */
  g_slist_foreach(list_items, on_foreach_clear_list_items, NULL);
  g_slist_free (list_items);

  g_object_unref (timeline_rotation);

  return EXIT_SUCCESS;
}
</code></pre>

    </div>

    





<div class="article-tags">
  
  <a class="badge badge-light" href="/tags/clutter/">Clutter</a>
  
</div>



<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=/2009/01/16/using-clutter-6/&amp;text=%ed%81%b4%eb%9f%ac%ed%84%b0%28Clutter%29%20%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0%20%286%29" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=/2009/01/16/using-clutter-6/&amp;t=%ed%81%b4%eb%9f%ac%ed%84%b0%28Clutter%29%20%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0%20%286%29" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=%ed%81%b4%eb%9f%ac%ed%84%b0%28Clutter%29%20%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0%20%286%29&amp;body=/2009/01/16/using-clutter-6/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=/2009/01/16/using-clutter-6/&amp;title=%ed%81%b4%eb%9f%ac%ed%84%b0%28Clutter%29%20%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0%20%286%29" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://web.whatsapp.com/send?text=%ed%81%b4%eb%9f%ac%ed%84%b0%28Clutter%29%20%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0%20%286%29%20/2009/01/16/using-clutter-6/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=/2009/01/16/using-clutter-6/&amp;title=%ed%81%b4%eb%9f%ac%ed%84%b0%28Clutter%29%20%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0%20%286%29" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>












  
  
  









<section id="comments">
  
    
<div id="disqus_thread"></div>
<script>
  let disqus_config = function () {
    
    
    
  };
  (function() {
    if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
      document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
      return;
    }
    var d = document, s = d.createElement('script'); s.async = true;
    s.src = 'https://' + "lethean" + '.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


  
</section>






  
  
  <div class="article-widget content-widget-hr">
    <h3>Related</h3>
    <ul>
      
      <li><a href="/2009/01/16/implementing-clutter-actors/">Clutter 액터 구현하기 (Implementing Actors)</a></li>
      
      <li><a href="/2009/01/16/using-clutter-5/">클러터(Clutter) 사용하기 (5)</a></li>
      
      <li><a href="/2009/01/15/using-clutter-2/">클러터(Clutter) 사용하기 (2)</a></li>
      
      <li><a href="/2009/01/15/using-clutter-3/">클러터(Clutter) 사용하기 (3)</a></li>
      
      <li><a href="/2009/01/15/using-clutter-4/">클러터(Clutter) 사용하기 (4)</a></li>
      
    </ul>
  </div>
  



  </div>
</article>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js" integrity="sha256-1zu+3BnLYV9LdiY85uXMzii3bdrkelyp37e0ZyTAQh0=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/r.min.js"></script>
        
      

    

    
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "포스트",
        'project': "Projects",
        'publication' : "논문",
        'talk' : "강연"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    
    <script id="dsq-count-scr" src="https://lethean.disqus.com/count.js" async></script>
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.0630fec5958cb075a5a38f042b3ddde6.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">
  

  <p class="powered-by">
    © lethean &middot; 

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
